# 电子病历命名实体识别和实体关系抽取研究综述

> 论文笔记

电子病历命名实体识别和实体关系抽取是电子病历信息抽取研究的主要内容。

电子病历信息抽取和文本挖掘研究大多关注于住院病历

> **医疗语言处理（Medical language processing，MLP）**

----

### 四大类实体

- 患者、医生以及医疗机构信息、编号等 **隐私信息**（Private health information，PHI）。需要去隐私化信息。

- 记录的治疗过程，包括**疾病、症状、检查和治疗**这四类于疾病治疗相关的实体

  > 还存在着一些重要修饰成分（或者叫上下文特征），如“**不排除**缺血性疾病”、“**无**眼震”，识别修饰成分很重要

- 治疗类实体中，**药物**是重要的治疗信息，涉及药物名称（通用名、商用名）、剂量、施治方式、施治频次、施治持续时间等，这些实体通常视为药物的属性

- 时间信息。治疗和病情的发展具有时序性。时间在病历中的表达方式没有固定的形式。

### 三大类实体关系

- 概念之间的关系：疾病与症状的关系、疾病与疾病的关系、疾病与检查的关系、疾病与治疗的关系
- 概念间的等价关系：等价表达只是形式不同，需要共指消解
- 概念与时间的关系：表示事件的概念通常具有事件属性，用于建立事件发生的时间线，分析治疗过程



![](https://raw.githubusercontent.com/Hengnian-Gu/picBed/master/pictures/20190909131145.png)

### 几大任务

- 去隐私化研究任务
- 信息抽取任务：药物信息识别需要抽取药品的诸多属性数据
- **主要任务**，概念的识别和概念关系的抽取类似于开放领域实体识别和实体关系抽取
- **重要任务**，医疗问题的修饰识别
- **重要任务**，共指消解
- 独立的研究任务，时间信息识别研究

==概念（医疗问题、检查、治疗）的识别、医疗问题的修饰和概念间关系的抽取是电子病历信息抽取研究的三个核心任务==

![](https://raw.githubusercontent.com/Hengnian-Gu/picBed/master/pictures/20190909134430.png)

### 电子病历文本特点

- 大数据特性

- 结构特点

  - 病程记录结构特点，面向时间的组织方式和面向问题的组织方式

    > 面向问题的病程记录普遍采用SOAP，首先描述各种症状、体征以及重要检查结果，然后对这些数据进行综合评估并做出诊断，最后给出相应的诊疗计划
    >
    > ![](https://raw.githubusercontent.com/Hengnian-Gu/picBed/master/pictures/20190909141727.png)

  - 出院小结结构特点

- 语言特点

  > 病历使用的语言表现出独特的子语言特性

  - 忽略隐含信息导致句子语法成分不完整，比如缺少动词
  - 符号在医疗领域的特殊意义
  - 表达模式化并且不同的模式可能等价
  - 包含大量术语和受控词汇
  - 子语言与通用语言混合使用
  - 存在固定的语义类型



### 命名实体识别和实体关系抽取研究综述

#### 命名实体识别研究综述

> Named entity recognition，NER。指识别文本中具有特定意义的实体，主要包括人、地名、机构名、专有名词等

==命名实体识别本质上是一个 **模式识别任务**==

##### 两类方法

- 基于分类的方法

  对每个词在多个标记上进行分类，选择分类概率最大的标记

- 基于序列化标注的方法

  对多个词同时标记选择联合概率最大的标注序列

> Finkel等把命名实体识别视作序列标注问题，采用CRF建立自动标注模型，**考虑的特征包括词特征、前后缀、词性序列和词的形态等**
>
> 与隐马尔科夫模型、最大熵马尔可夫模型相比，CRF条件随机场模型在中文命名实体上的性能最好
>
> 机器学习方法依赖于大量的标注语料，只需要少量标注语料的半监督学习方法称为了命名实体识别研究的新方向

- Ke等应用半监督学习协同训练（Co-training）算法实现中文组织名的识别，在少量标注语料的情况下，结合大量的未标注语料，协同训练CRF模型和SVM模型
- Ando等提出新的半监督学习方法，采用多任务学习，把在标注语料上的命名实体识别任务和在无标注语料上的两个辅助性无监督任务联合起来
- Collobert等提出一个统一的神经网络框架和学习算法联合解决自然语言处理中的序列标注问题

>研究方法集中于：
>
>- 基于标注语料的有监督机器学习方法
>- 基于标注语料和未标注语料的半监督学习
>- 联合相关任务的多任务学习

#### 实体关系抽取研究综述

> 完整的实体关系包括两个方面：
>
> - 关系类型。说明该关系是什么关系，如雇佣关系、类属关系
> - 关系的参数。发生关系的实体，如雇佣关系中的雇员和公司

- Zhang等将中文实体名和关系识别看作一系列分类问题
- Brin和Agichtein等最早应用半监督学习方法在小样本上迭代地抽取模式进而根据模式识别实体关系
- Zhang提出基于SVM的弱监督关系分类系统
- 无监督实体关系抽取方法主要采用的是聚类方法，主要研究聚类算法以及合并策略对实体关系抽取的影响（K-means、自组织映射、Affinity propagation）

#### 命名实体识别和实体关系抽取的跨领域研究

> 生物医学领域和临床医疗领域是命名实体识别和实体关系抽取研究的两个重要领域

==实体识别模型从一个领域一直到另一个领域通常会遇到严重的性能下降问题，主要原因在于 **命名实体的类型定义不同】不同领域有着不同的语言特点**，尽管不同领域间的差异较大，但研究思路基本相同，一般采用基于规则、基于字典或者机器学习方法==

基于机器学习的方法依赖于大量的标注语料，而且标注语料也是评价识别效果的 **黄金标准**。因此当在一个新的领域进行实体识别和实体关系识别研究时，首先面临的问题就是 ==如何以小的成本获得足够支持机器学习模型训练和评价的标注语料==

- 探索新的标注模式和半自动语料标注方法
- 探索基于少量标注语料的机器学习模型、探索基于部分标注语料的机器学习模型、基于迁移学习的机器学习模型

### 电子病历命名实体识别

#### 电子病历命名实体识别任务

> 三类命名实体：**医疗问题（包括疾病和症状）、治疗、检查**

任务包括两方面的工作：

- 识别命名实体的边界
- 确定命名实体的类型

> I2B2 2010 定义的实体类型 **粒度较大**，需要继续细分，比如医疗问题细分为疾病和症状

![](https://raw.githubusercontent.com/Hengnian-Gu/picBed/master/pictures/20190909160229.png)

#### 电子病历命名实体识别方法

- 基于字典和规则的方法

  单纯基于词典的方法难以适应复杂的语言现象

- 基于机器学习的方法

  > 主要是基于分类的方法和基于序列标注的方法，
  >
  > ==基于序列标注的方法能联合考虑相邻词的标注结果，因而获得较多关注==

  - 叶枫等采用条件随机场模型对疾病、临床症状、手术操作3类中文病历中常见的命名实体进行识别，**融合人工整理的词典辅助抽取特征**
  - Li等对比了CRF和SVM在电子病历命名实体识别中的性能，结合SNOMED，对比结果CRF的F值高于SVM
  - Uzuner概述了I2B2 2010评测中各小组实现电子病历命名实体抽取的方法，**大部分采用CRF模型，并结合UMLS作为知识库，辅助抽取特征**
  - Jiang等分别采用CRF（CRF++）和SVM（Tiny SVM）实现了命名实体识别，引入三类特征：**上下文特征、UMLS、NLP系统（如MedLEE）的处理结果以及章节信息，并结合手工整理的规则进行后处理**，结果显示CRF模型优于SVM模型。
  - Jonnala-gadda等采用一个半监督CRF模型识别命名实体，**半监督体现在该模型应用分布式语义（Distributional semantics）方法从未标注语料中利用向量空间模型表示词的上下文特征并计算语义相似度，把与待识别的对象有相似的上下文的词作为特征词**
  - ==de Bruijn等采用 **半马尔可夫模型（一种隐马尔可夫模型）对词进行序列化标注实现命名实体识别，用到的标记只有4类（Outside,problem,treatment,test），引入的特征主要有上下文特征和UMLS以及cTAKES的结果**，采用Self-training方法扩大训练语料==

  ![](https://raw.githubusercontent.com/Hengnian-Gu/picBed/master/pictures/20190910102805.png)

==由于电子病历具有包含大量术语这一显著特点，以UMLS为代表的词典资源以及MedLEE和cTAKES等基于词典的NLP工具发挥重要作用，**因此词典资源的构建工作是一项重要的基础工作**==

#### 疾病和症状的修饰识别任务

额外的任务，就是识别疾病和症状的 **修饰成分**，包括当前的、否认、既往史、非患者本人、待证实等

![](https://raw.githubusercontent.com/Hengnian-Gu/picBed/master/pictures/20190910104052.png)

#### 疾病和症状的修饰识别方法

- 基于规则的方法

  - Chapman等使用正则表达式识别某种疾病是当前发生的（Present）还是当前未发生的（Absent）
  - Aronow等实现基于规则“否定”识别NegExpander，该工具识别带有“否定”修饰的名词短语和连词
  - Sohn等构建DepNeg，在小规模样本上构造动词短语的依存模式，根据依存模式抽取依存路径
  - Harkema等基于NegEx提出了ConText算法，算法在不同风格的文本上表现不好

- 基于机器学习的方法

  > 通常把该任务视为分类问题，并把词典和规则系统的结果作为分类特征

  - Uzuner等采用两类方法进行了比较研究，基于分类的方法要优于基于规则的方法，主要原因是由于基于分类的方法能充分利用医疗问题所处的上下文信息
  - de Bruijn采用两阶段分类方法取得最优结果
  - Clark等联合使用CRF和最大熵模型以及状态规则取得了很好的结果

![](https://raw.githubusercontent.com/Hengnian-Gu/picBed/master/pictures/20190910105613.png)

==基于机器学习的分类方法，除了整合规则外，还可以充分考虑上下文特征、语法特征以及病历文本的章节名称等结构化信息，能有效的识别各种类型的修饰，被证明是有效的额方法。**所以，机器学习和规则相结合的方法是修饰识别研究的重点**，同时为了充分发挥机器学习方法的优势，应加强病历文本的词法和句法分析的研究==

### 电子病历实体关系抽取

#### 电子病历实体关系抽取任务

> 研究从电子病例中抽取疾病、症状、检查和治疗这几类实体间的关系

实体关系抽取任务在命名实体识别基础上展开，对病历文本中同一个语句中的两个命名实体赋予预定义的关系类型，因而该任务转化为 **分类问题**

关系包括 **医疗问题和医疗问题之间、医疗问题和检查问题、医疗问题和治疗之间的关系**

![](https://raw.githubusercontent.com/Hengnian-Gu/picBed/master/pictures/20190911105058.png)

==可以把电子病历中抽取出来的实体按照实体关系组织起来，系统地表示以医疗问题、治疗和检查为主体地医疗知识==

#### 电子病历实体关系抽取方法

> 研究方法主要采用基于机器学习的分类方法，分类模型一般采用SVM、最大熵等

- Frunza在Medline摘要数据上研究了疾病和治疗之间的三种关系的识别，对比了三种分类方式，其中构造一个分类模型实现三个关系类型上的分零五i的方式是最好的，**分类模型以朴素贝叶斯和SVM为主，特征的选取上除了词特征和短语特征外，还引入了UMLS语义类型**
- Uzunzer等以句子为单位识别电子病历实体关系，用到的特征 **主要包括实体在句子中的顺序和距离、词汇特征（包括组成实体的词、出现在实体上下文中的动词等）以及链接语法**，对比结果表明词汇特征能发挥重要作用
- Rink等，病历文本使用GENIA预处理，**抽取的特征主要包括词汇特征、上下文特征以及上下文文本之间的相似度**，并使用辅助特征抽取，**结果表明词典和上下文特征在关系识别中发挥了重要作用**
- Demner-Fushman尝试使用UMLS中的概念间关系作为分类特征解决上下文信息不足的问题
- de Bruijn采用最大熵作为分类模型研究关系抽取，利用cTAKES对病历文本进行依存分析，抽取上下文特征，特征还包括UMLS中概念语义类型和语义关系，**结果表明UMLS和依存句法分析结果以及未标记数据对关系识别有显著影响**

> 电子病历中有些类型的关系远多于其他类型的关系，同时大部分实体间不存在语义关系（不平衡的现状）

- Ryan分析了电子病历中实体关系的偏置特性，提出了一种节省标注语料的半监督实体关系识别方法
- Wang等从电子病历中计算疾病和症状的共现来发现两者间的关联关系
- Roberts等在临床信息抽取系统CLEF中采用SVM在肿瘤患者病历上实现了医疗命名实体关系的识别，**对比研究了语句内和跨语句范围的关系识别，结果表明适用于语句内实体关系识别的方法在跨语句范围的实体关系上准确率较低**

![](https://raw.githubusercontent.com/Hengnian-Gu/picBed/master/pictures/20190911115348.png)

==电子病历实体关系抽取的一个最大特色是医疗领域的词典发挥了重要作用，主要是因为电子病历文本简短精炼，上下文信息不充分，而体现医疗知识的实体关系可以部分地从词典得到==

**==词典知识和句法分析能有效提升电子病历实体关系抽取的性能==**

**电子病历实体关系抽取除了显式关系抽取研究外，基于大量已抽取的命名实体和实体关系的隐含关系发现研究能挖掘出大量隐式实体关系**

### 电子病历信息抽取研究语料资源

电子病历具有数据量庞大、富含医疗知识和 **患者的个性化健康信息**这两大特点

现行的统计机器学习方法非常 **依赖于标注语料**，==一方面是为了训练模型，另一方面是为了评价模型的学习效==

国外已I2B2为代表的医疗领域共享任务及语料库大大促进了电子病历信息抽取的研究

#### I2B2评测及语料库

2006~2012

#### 其他语料库和共享任务

病历分类、自杀笔记的情感分析、病历文本检索

#### 中文电子病历语料库构建

由于病历文本语言的独特性，通用领域的词法分析和句法分析等自然语言处理工具并不适合病历文本，而这些又是电子病历信息抽取的基础，因此面向中文电子病历文本的分词、词性标注和句法分析也是我们研究的重点

拟构建的语料库包括 **分词和词性标注、句法分析、实体识别、实体关系抽取**四个语料

### 医疗领域词典及知识库

- UMLS	一体化医学语言系统
- MeSH    医学主题词表
- SNOMEDCT    医学系统命名法-临床术语
- ICD    国际疾病分类

#### 结束语

当前的问题：

- 缺乏面向电子病历语言的自然语言处理工具

- 标注语料不够丰富

- 现有研究方法没有充分考虑病历文本的特点并只是针对英文病历

  ----

值得关注的方向：

- 电子病历文本内容呈半结构化，以及它的子语言特点，应整合到机器学习模型中
- 中文电子病历实体和实体关系识别研究，中文电子病历标注语料库的构建
- 医疗领域的词典和知识库对很重要，中文词典和知识库较少
- 为了充分利用电子病历的语言特点，有必要开展针对病历文本的分词、词性标注及句法分析等基础研究
- **==电子病历中挖掘出的实体和实体关系实则形成了医疗领域的知识图谱，医疗领域知识图谱的研究包括知识图谱的构建和应用==**

